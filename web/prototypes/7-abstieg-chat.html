<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kura — Abstieg / Chat</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;700;900&family=Crimson+Pro:ital,wght@0,400;0,500;1,400&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { font-size: 16px; }

  body {
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
    background: linear-gradient(
      to bottom,
      #FAF8F4 0%,
      #FAF8F4 3%,
      #F0EBE2 8%,
      #E8E0D4 14%,
      #D8CCBB 20%,
      #C8BAA3 28%,
      #A8956E 38%,
      #8B7355 48%,
      #6B5A3E 56%,
      #4A3D2E 66%,
      #2C2419 76%,
      #1A1612 86%,
      #110E0B 100%
    );
    color: #1A1612;
  }

  /* === Reveal system === */
  .reveal {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
  }
  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .stagger > .reveal:nth-child(1) { transition-delay: 0s; }
  .stagger > .reveal:nth-child(2) { transition-delay: 0.12s; }
  .stagger > .reveal:nth-child(3) { transition-delay: 0.24s; }
  .stagger > .reveal:nth-child(4) { transition-delay: 0.36s; }
  .stagger > .reveal:nth-child(5) { transition-delay: 0.48s; }
  .stagger > .reveal:nth-child(6) { transition-delay: 0.6s; }
  .stagger > .reveal:nth-child(7) { transition-delay: 0.72s; }

  /* === SURFACE === */
  .surface {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .surface-title {
    font-family: 'Outfit', sans-serif;
    font-weight: 900;
    font-size: clamp(8rem, 22vw, 18rem);
    line-height: 0.85;
    letter-spacing: 0.02em;
    color: #1A1612;
    text-align: center;
    animation: surfaceIn 1.2s cubic-bezier(0.16, 1, 0.3, 1) both;
  }

  @keyframes surfaceIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* === PHONE — minimal illustration === */
  .phone-scene {
    display: flex;
    justify-content: center;
    padding: 4vh 8%;
    min-height: 70vh;
    align-items: center;
  }

  .phone {
    width: min(420px, 85vw);
    border: 1.5px solid rgba(26, 22, 18, 0.12);
    border-radius: 32px;
    padding: 3.5rem 1.5rem 2.5rem;
    position: relative;
    background: rgba(250, 248, 244, 0.3);
  }

  /* Notch hint */
  .phone::before {
    content: '';
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 48px;
    height: 5px;
    border-radius: 3px;
    background: rgba(26, 22, 18, 0.08);
  }

  .chat {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    min-height: 240px;
  }

  /* Chat messages */
  .msg {
    max-width: 85%;
    font-family: 'Crimson Pro', serif;
    font-size: 1.0625rem;
    line-height: 1.6;
    padding: 0.75rem 1rem;
    border-radius: 16px;
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }

  .msg.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .msg--user {
    align-self: flex-end;
    background: rgba(26, 22, 18, 0.06);
    color: #3D352A;
    border-bottom-right-radius: 4px;
  }

  .msg--agent {
    align-self: flex-start;
    background: transparent;
    color: #5C5549;
    border-bottom-left-radius: 4px;
    border: 1px solid rgba(26, 22, 18, 0.08);
  }

  /* Typing indicator */
  .typing {
    align-self: flex-start;
    display: flex;
    gap: 6px;
    padding: 0.85rem 1rem;
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .typing.visible { opacity: 1; }

  .typing-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: rgba(26, 22, 18, 0.25);
    animation: typingBounce 1.4s ease-in-out infinite;
  }

  .typing-dot:nth-child(2) { animation-delay: 0.15s; }
  .typing-dot:nth-child(3) { animation-delay: 0.3s; }

  @keyframes typingBounce {
    0%, 60%, 100% { transform: translateY(0); opacity: 0.3; }
    30% { transform: translateY(-4px); opacity: 0.7; }
  }

  /* === DESCENT TRANSITION — from phone to system === */
  .descent-bridge {
    padding: 10vh 8%;
    display: flex;
    justify-content: center;
  }

  .dots-trail {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3rem;
  }

  .dots-trail .dot-group {
    display: flex;
    gap: 8px;
  }

  .dots-trail .dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(26, 22, 18, 0.18);
    animation: typingBounce 1.4s ease-in-out infinite;
  }

  .dots-trail .dot-group:nth-child(2) .dot { animation-delay: 0.2s; background: rgba(26, 22, 18, 0.14); }
  .dots-trail .dot-group:nth-child(2) .dot:nth-child(2) { animation-delay: 0.35s; }
  .dots-trail .dot-group:nth-child(2) .dot:nth-child(3) { animation-delay: 0.5s; }
  .dots-trail .dot-group:nth-child(3) .dot { animation-delay: 0.4s; background: rgba(26, 22, 18, 0.10); }
  .dots-trail .dot-group:nth-child(3) .dot:nth-child(2) { animation-delay: 0.55s; }
  .dots-trail .dot-group:nth-child(3) .dot:nth-child(3) { animation-delay: 0.7s; }

  .descent-label {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: 0.8125rem;
    letter-spacing: 0.2em;
    color: #78706A;
    text-align: center;
    margin-top: 1.5rem;
  }

  /* === THRESHOLD — Decomposition === */
  .threshold {
    min-height: 80vh;
    position: relative;
    padding: 0 8%;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .strata-lines {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .strata-line {
    position: absolute;
    left: 0;
    width: 0;
    height: 1px;
    background: #1A1612;
    transition: width 1.2s cubic-bezier(0.16, 1, 0.3, 1);
  }
  .strata-line.visible { width: 100%; }

  .threshold .strata-line:nth-child(1) { top: 8%; opacity: 0.04; transition-delay: 0s; }
  .threshold .strata-line:nth-child(2) { top: 22%; opacity: 0.06; transition-delay: 0.1s; }
  .threshold .strata-line:nth-child(3) { top: 38%; opacity: 0.08; transition-delay: 0.2s; }
  .threshold .strata-line:nth-child(4) { top: 55%; opacity: 0.10; transition-delay: 0.3s; }
  .threshold .strata-line:nth-child(5) { top: 72%; opacity: 0.12; transition-delay: 0.4s; }

  .receiving-label {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: 0.875rem;
    letter-spacing: 0.12em;
    color: #7A7068;
    margin-bottom: 2.5rem;
    display: block;
  }

  .decomposition {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .decomposition-row {
    display: flex;
    align-items: baseline;
    gap: 2rem;
  }

  .field-name {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 400;
    font-size: 0.9375rem;
    color: #8E8274;
    min-width: 11rem;
    text-align: right;
    letter-spacing: 0.02em;
  }

  .field-value {
    font-family: 'Crimson Pro', serif;
    font-size: 1.25rem;
    color: #504840;
  }

  .field-value--mono {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1rem;
    color: #5C5549;
  }

  /* === INSIDE === */
  .inside {
    min-height: 180vh;
    position: relative;
    overflow: hidden;
  }

  .event-lines {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .event-line {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 1px;
    opacity: 0;
    transition: opacity 1.5s ease;
  }
  .event-line.visible { opacity: 1; }

  .event-line::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to bottom,
      transparent 0%,
      rgba(232, 224, 212, 0.15) 20%,
      rgba(232, 224, 212, 0.25) 50%,
      rgba(232, 224, 212, 0.15) 80%,
      transparent 100%
    );
  }

  .event-line:nth-child(1) { left: 12%; transition-delay: 0s; }
  .event-line:nth-child(2) { left: 28%; transition-delay: 0.15s; }
  .event-line:nth-child(3) { left: 45%; transition-delay: 0.3s; }
  .event-line:nth-child(4) { left: 62%; transition-delay: 0.45s; }
  .event-line:nth-child(5) { left: 78%; transition-delay: 0.6s; }
  .event-line:nth-child(6) { left: 91%; transition-delay: 0.75s; }

  .event-dot {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(196, 147, 90, 0.6);
  }

  .projection-band {
    position: absolute;
    left: 0;
    right: 0;
    background: rgba(232, 224, 212, 0.04);
    border-top: 1px solid rgba(232, 224, 212, 0.08);
    border-bottom: 1px solid rgba(232, 224, 212, 0.04);
  }

  .inside > svg {
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 1.5s ease 0.5s;
  }
  .inside > svg.visible { opacity: 1; }

  .event-write {
    position: relative;
    z-index: 2;
    padding: 12vh 8%;
  }

  .event-label {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(196, 147, 90, 0.45);
    margin-bottom: 1.25rem;
  }

  .event-json {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: clamp(0.8125rem, 1.4vw, 1rem);
    line-height: 2.1;
    color: rgba(232, 224, 212, 0.45);
    max-width: 40rem;
  }

  .event-json .hl { color: rgba(196, 147, 90, 0.7); }
  .event-json .val { color: rgba(232, 224, 212, 0.7); }

  .event-json .line {
    opacity: 0;
    transform: translateX(-6px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }
  .event-json .line.typed {
    opacity: 1;
    transform: translateX(0);
  }

  .json-cursor {
    display: inline-block;
    width: 6px;
    height: 1em;
    background: rgba(196, 147, 90, 0.5);
    vertical-align: text-bottom;
    animation: blink 0.6s step-end infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .projection-compute {
    position: relative;
    z-index: 2;
    padding: 4vh 8%;
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }

  .projection-block {
    max-width: 42rem;
    opacity: 0;
    transform: translateY(8px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .projection-block.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .projection-label {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: 0.8125rem;
    letter-spacing: 0.15em;
    color: rgba(196, 147, 90, 0.55);
    margin-bottom: 1rem;
    display: block;
  }

  .projection-data {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: clamp(0.8125rem, 1.3vw, 0.9375rem);
    line-height: 2;
    color: rgba(232, 224, 212, 0.4);
  }

  .projection-data .hl { color: rgba(196, 147, 90, 0.6); }
  .projection-data .val { color: rgba(232, 224, 212, 0.6); }
  .projection-data .alert { color: rgba(220, 140, 80, 0.8); }

  /* === DEEP === */
  .deep {
    min-height: 100vh;
    position: relative;
    overflow: hidden;
  }

  .mesh {
    position: absolute;
    inset: 0;
    pointer-events: none;
    opacity: 0;
    transition: opacity 2s ease;
  }
  .mesh.visible { opacity: 1; }

  .mesh svg {
    width: 100%;
    height: 100%;
    position: absolute;
  }

  .inference-cloud {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(
      ellipse at center,
      rgba(196, 147, 90, 0.08) 0%,
      rgba(196, 147, 90, 0.03) 40%,
      transparent 70%
    );
    pointer-events: none;
    animation: pulse 6s ease-in-out infinite;
    opacity: 0;
    transition: opacity 2s ease 0.5s;
  }
  .inference-cloud.visible { opacity: 1; }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.15); }
  }
  .inference-cloud:nth-child(2) { animation-delay: -2s; }
  .inference-cloud:nth-child(3) { animation-delay: -4s; }

  .inference-text {
    position: relative;
    z-index: 2;
    padding: 16vh 8%;
    display: flex;
    flex-direction: column;
    gap: 4rem;
  }

  .inference-step { max-width: 36rem; }

  .inference-step-label {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(196, 147, 90, 0.4);
    margin-bottom: 1rem;
  }

  .inference-step-content {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 300;
    font-size: 0.9375rem;
    line-height: 2.1;
    color: rgba(232, 224, 212, 0.35);
  }

  .inference-step-content .hl { color: rgba(196, 147, 90, 0.6); }
  .inference-step-content .val { color: rgba(232, 224, 212, 0.55); }
  .inference-step-content .alert { color: rgba(220, 140, 80, 0.7); }

  /* === CORE — Agent response in phone === */
  .core {
    min-height: 80vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 8%;
  }

  .phone--dark {
    width: min(420px, 85vw);
    border: 1.5px solid rgba(232, 224, 212, 0.1);
    border-radius: 32px;
    padding: 3.5rem 1.5rem 2.5rem;
    position: relative;
  }

  .phone--dark::before {
    content: '';
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 48px;
    height: 5px;
    border-radius: 3px;
    background: rgba(232, 224, 212, 0.06);
  }

  .chat--dark {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .msg--user-echo {
    align-self: flex-end;
    max-width: 85%;
    font-family: 'Crimson Pro', serif;
    font-size: 0.9375rem;
    line-height: 1.55;
    padding: 0.65rem 0.9rem;
    border-radius: 16px;
    border-bottom-right-radius: 4px;
    background: rgba(232, 224, 212, 0.06);
    color: rgba(232, 224, 212, 0.35);
  }

  .msg--agent-response {
    align-self: flex-start;
    max-width: 88%;
    font-family: 'Crimson Pro', serif;
    font-size: 1.0625rem;
    line-height: 1.65;
    padding: 0.75rem 1rem;
    border-radius: 16px;
    border-bottom-left-radius: 4px;
    border: 1px solid rgba(232, 224, 212, 0.08);
    color: rgba(232, 224, 212, 0.8);
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .msg--agent-response.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .msg--agent-response strong {
    font-weight: 500;
    color: rgba(220, 140, 80, 0.8);
  }

  /* === BOTTOM === */
  .bottom {
    min-height: 20vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .bottom-mark {
    font-family: 'Outfit', sans-serif;
    font-weight: 900;
    font-size: clamp(2rem, 5vw, 4rem);
    color: rgba(232, 224, 212, 0.06);
    letter-spacing: 0.04em;
  }

  /* === Responsive === */
  @media (max-width: 768px) {
    .threshold { padding: 0 6%; }
    .event-write { padding: 10vh 6%; }
    .projection-compute { padding: 4vh 6%; }
    .inference-text { padding: 12vh 6%; }
    .core { padding: 6%; }

    .decomposition-row {
      flex-direction: column;
      gap: 0.25rem;
    }
    .field-name {
      text-align: left;
      min-width: 0;
    }
  }
</style>
</head>
<body>

<!-- SURFACE -->
<section class="surface">
  <h1 class="surface-title">KURA</h1>
</section>


<!-- PHONE — User sends message -->
<section class="phone-scene" id="phone-scene">
  <div class="phone">
    <div class="chat">
      <div class="msg msg--user" id="msg-user">
        Did squats today, 5×5 at 100kg. Felt heavy, had to grind the last two reps. Also some light stretching after.
      </div>
      <div class="typing" id="typing">
        <span class="typing-dot"></span>
        <span class="typing-dot"></span>
        <span class="typing-dot"></span>
      </div>
    </div>
  </div>
</section>


<!-- Bridge — dots trail downward -->
<div class="descent-bridge" id="descent-bridge">
  <div class="dots-trail">
    <div class="dot-group">
      <span class="dot"></span>
      <span class="dot" style="animation-delay:0.15s"></span>
      <span class="dot" style="animation-delay:0.3s"></span>
    </div>
    <div class="dot-group">
      <span class="dot"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
    <div class="dot-group">
      <span class="dot"></span>
      <span class="dot"></span>
      <span class="dot"></span>
    </div>
    <div class="descent-label">what happens inside those three dots</div>
  </div>
</div>


<!-- THRESHOLD — Decomposition -->
<section class="threshold" id="threshold">
  <div class="strata-lines" id="strata-lines">
    <div class="strata-line"></div>
    <div class="strata-line"></div>
    <div class="strata-line"></div>
    <div class="strata-line"></div>
    <div class="strata-line"></div>
  </div>

  <div class="stagger" id="decomposition">
    <span class="receiving-label reveal">receiving</span>
    <div class="decomposition">
      <div class="decomposition-row reveal">
        <span class="field-name">exercise_id</span>
        <span class="field-value field-value--mono">barbell_back_squat</span>
      </div>
      <div class="decomposition-row reveal">
        <span class="field-name">sets × reps</span>
        <span class="field-value">5 × 5</span>
      </div>
      <div class="decomposition-row reveal">
        <span class="field-name">weight_kg</span>
        <span class="field-value">100</span>
      </div>
      <div class="decomposition-row reveal">
        <span class="field-name">rpe</span>
        <span class="field-value">9 — 9.5</span>
      </div>
      <div class="decomposition-row reveal">
        <span class="field-name">notes</span>
        <span class="field-value field-value--mono">last two reps ground out</span>
      </div>
      <div class="decomposition-row reveal">
        <span class="field-name">also</span>
        <span class="field-value field-value--mono">stretching · logged separately</span>
      </div>
    </div>
  </div>
</section>


<!-- INSIDE -->
<section class="inside" id="inside">
  <div class="event-lines" id="event-lines">
    <div class="event-line">
      <span class="event-dot" style="top:12%;left:-1px"></span>
      <span class="event-dot" style="top:28%;left:-1px"></span>
      <span class="event-dot" style="top:45%;left:-1px"></span>
      <span class="event-dot" style="top:63%;left:-1px"></span>
      <span class="event-dot" style="top:78%;left:-1px"></span>
    </div>
    <div class="event-line">
      <span class="event-dot" style="top:8%;left:-1px"></span>
      <span class="event-dot" style="top:22%;left:-1px"></span>
      <span class="event-dot" style="top:38%;left:-1px"></span>
      <span class="event-dot" style="top:55%;left:-1px"></span>
      <span class="event-dot" style="top:72%;left:-1px"></span>
      <span class="event-dot" style="top:88%;left:-1px"></span>
    </div>
    <div class="event-line">
      <span class="event-dot" style="top:15%;left:-1px"></span>
      <span class="event-dot" style="top:35%;left:-1px"></span>
      <span class="event-dot" style="top:52%;left:-1px"></span>
      <span class="event-dot" style="top:70%;left:-1px"></span>
      <span class="event-dot" style="top:90%;left:-1px"></span>
    </div>
    <div class="event-line">
      <span class="event-dot" style="top:10%;left:-1px"></span>
      <span class="event-dot" style="top:30%;left:-1px"></span>
      <span class="event-dot" style="top:48%;left:-1px"></span>
      <span class="event-dot" style="top:65%;left:-1px"></span>
      <span class="event-dot" style="top:82%;left:-1px"></span>
    </div>
    <div class="event-line">
      <span class="event-dot" style="top:18%;left:-1px"></span>
      <span class="event-dot" style="top:40%;left:-1px"></span>
      <span class="event-dot" style="top:58%;left:-1px"></span>
      <span class="event-dot" style="top:75%;left:-1px"></span>
    </div>
    <div class="event-line">
      <span class="event-dot" style="top:25%;left:-1px"></span>
      <span class="event-dot" style="top:50%;left:-1px"></span>
      <span class="event-dot" style="top:80%;left:-1px"></span>
    </div>
  </div>

  <div class="projection-band" style="top:18%;height:6%"></div>
  <div class="projection-band" style="top:38%;height:8%"></div>
  <div class="projection-band" style="top:60%;height:5%"></div>
  <div class="projection-band" style="top:78%;height:7%"></div>

  <svg id="threads-svg" viewBox="0 0 1440 2200" preserveAspectRatio="none">
    <line x1="173" y1="264" x2="403" y2="616" stroke="rgba(196,147,90,0.12)" stroke-width="0.5" />
    <line x1="403" y1="484" x2="648" y2="836" stroke="rgba(196,147,90,0.08)" stroke-width="0.5" />
    <line x1="648" y1="770" x2="893" y2="1144" stroke="rgba(196,147,90,0.1)" stroke-width="0.5" />
    <line x1="893" y1="660" x2="1123" y2="990" stroke="rgba(196,147,90,0.06)" stroke-width="0.5" />
    <line x1="173" y1="990" x2="648" y2="1430" stroke="rgba(196,147,90,0.08)" stroke-width="0.5" />
    <line x1="1123" y1="1100" x2="893" y2="1650" stroke="rgba(196,147,90,0.1)" stroke-width="0.5" />
  </svg>

  <div class="event-write" id="event-write">
    <div class="event-label reveal">persisting event</div>
    <div class="event-json" id="event-json">
      <div class="line">{</div>
      <div class="line">&nbsp;&nbsp;<span class="hl">event_type</span>: <span class="val">"set.logged"</span>,</div>
      <div class="line">&nbsp;&nbsp;<span class="hl">data</span>: {</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;exercise_id: <span class="val">"barbell_back_squat"</span>,</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;sets: <span class="val">5</span>,</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;reps: <span class="val">5</span>,</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;weight_kg: <span class="val">100</span>,</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;rpe: <span class="val">9.5</span></div>
      <div class="line">&nbsp;&nbsp;},</div>
      <div class="line">&nbsp;&nbsp;<span class="hl">metadata</span>: {</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;session_id: <span class="val">"019503a1-..."</span>,</div>
      <div class="line">&nbsp;&nbsp;&nbsp;&nbsp;source: <span class="val">"agent"</span></div>
      <div class="line">&nbsp;&nbsp;}</div>
      <div class="line">}<span class="json-cursor" id="json-cursor"></span></div>
    </div>
  </div>

  <div class="projection-compute" id="projections">
    <div class="projection-block" id="proj-1">
      <span class="projection-label">exercise_progression / barbell_back_squat</span>
      <div class="projection-data">
        estimated_1rm: <span class="val">116.7 kg</span> &nbsp;← <span class="hl">Epley</span><br>
        previous_1rm: <span class="val">116.7 kg</span><br>
        pr: <span class="val">false</span><br>
        trend: <span class="alert">plateau · 3 weeks</span><br>
        total_volume: <span class="val">2500 kg</span><br>
        session_count: <span class="val">14</span>
      </div>
    </div>
    <div class="projection-block" id="proj-2">
      <span class="projection-label">training_timeline / overview</span>
      <div class="projection-data">
        week: <span class="val">2026-W07</span><br>
        sessions_this_week: <span class="val">3</span><br>
        frequency: <span class="val">3.2 /wk</span> (26w avg)<br>
        streak: <span class="val">12 days</span><br>
        top_set: <span class="val">barbell_back_squat 100kg × 5 → 116.7 e1rm</span>
      </div>
    </div>
    <div class="projection-block" id="proj-3">
      <span class="projection-label">recovery / overview</span>
      <div class="projection-data">
        last_sleep: <span class="val">6.5h</span> &nbsp;(<span class="alert">below target 7.5h</span>)<br>
        soreness: <span class="val">lower_back · 3/10</span><br>
        energy_trend: <span class="alert">declining · 5d</span>
      </div>
    </div>
  </div>
</section>


<!-- DEEP — Inference -->
<section class="deep" id="deep">
  <div class="mesh" id="mesh">
    <svg viewBox="0 0 1440 1000" fill="none" preserveAspectRatio="xMidYMid slice">
      <path d="M-20,80 C80,65 180,50 300,55 C420,60 500,85 620,90 C740,95 840,70 960,62 C1080,55 1180,75 1300,82 C1380,87 1460,78 1460,75" stroke="rgba(232,224,212,0.06)" stroke-width="0.8" />
      <path d="M-20,180 C100,165 200,148 320,152 C440,156 520,178 640,185 C760,192 860,170 980,160 C1100,152 1200,172 1320,180 C1400,185 1460,178 1460,175" stroke="rgba(232,224,212,0.08)" stroke-width="0.8" />
      <path d="M-20,300 C85,285 190,268 310,272 C430,276 515,298 635,308 C755,316 855,290 975,280 C1095,272 1195,292 1315,302 C1400,308 1460,298 1460,295" stroke="rgba(232,224,212,0.09)" stroke-width="0.8" />
      <path d="M-20,420 C95,402 200,385 325,390 C450,395 530,418 650,428 C770,438 870,412 990,400 C1110,390 1210,412 1330,422 C1410,428 1460,418 1460,415" stroke="rgba(232,224,212,0.06)" stroke-width="0.8" />
      <path d="M-20,540 C85,522 195,505 320,510 C440,515 525,538 645,548 C765,558 865,532 985,520 C1105,510 1205,532 1325,542 C1405,548 1460,538 1460,535" stroke="rgba(232,224,212,0.08)" stroke-width="0.8" />
      <path d="M-20,680 C95,662 205,645 330,650 C450,655 535,678 655,688 C775,698 875,672 995,660 C1115,650 1215,672 1335,682 C1415,688 1460,678 1460,675" stroke="rgba(232,224,212,0.07)" stroke-width="0.8" />
      <path d="M-20,820 C90,802 200,785 325,790 C445,795 530,818 650,828 C770,838 870,812 990,800 C1110,790 1210,812 1330,822 C1410,828 1460,818 1460,815" stroke="rgba(232,224,212,0.08)" stroke-width="0.8" />

      <line x1="173" y1="0" x2="173" y2="1000" stroke="rgba(232,224,212,0.05)" stroke-width="0.5" />
      <line x1="403" y1="0" x2="403" y2="1000" stroke="rgba(232,224,212,0.07)" stroke-width="0.5" />
      <line x1="648" y1="0" x2="648" y2="1000" stroke="rgba(232,224,212,0.04)" stroke-width="0.5" />
      <line x1="893" y1="0" x2="893" y2="1000" stroke="rgba(232,224,212,0.06)" stroke-width="0.5" />
      <line x1="1123" y1="0" x2="1123" y2="1000" stroke="rgba(232,224,212,0.05)" stroke-width="0.5" />

      <line x1="173" y1="180" x2="403" y2="300" stroke="rgba(196,147,90,0.06)" stroke-width="0.4" />
      <line x1="648" y1="300" x2="893" y2="420" stroke="rgba(196,147,90,0.07)" stroke-width="0.4" />
      <line x1="893" y1="540" x2="1123" y2="680" stroke="rgba(196,147,90,0.05)" stroke-width="0.4" />

      <circle cx="173" cy="180" r="2" fill="rgba(196,147,90,0.3)" />
      <circle cx="403" cy="300" r="2.5" fill="rgba(196,147,90,0.35)" />
      <circle cx="648" cy="300" r="2" fill="rgba(196,147,90,0.25)" />
      <circle cx="893" cy="540" r="3" fill="rgba(196,147,90,0.4)" />
    </svg>
  </div>

  <div class="inference-cloud" id="cloud-1" style="width:400px;height:400px;top:8%;left:5%"></div>
  <div class="inference-cloud" id="cloud-2" style="width:300px;height:300px;top:38%;right:10%"></div>
  <div class="inference-cloud" id="cloud-3" style="width:350px;height:350px;bottom:12%;left:28%"></div>

  <div class="inference-text stagger" id="inference">
    <div class="inference-step reveal">
      <div class="inference-step-label">signal dynamics</div>
      <div class="inference-step-content">
        squat_1rm.<span class="hl">velocity</span> = <span class="val">+0.0 kg/week</span><br>
        squat_1rm.<span class="hl">acceleration</span> = <span class="val">−2.1 kg/week²</span><br>
        squat_1rm.<span class="hl">trajectory</span> = <span class="alert">stagnating</span>
      </div>
    </div>
    <div class="inference-step reveal" style="margin-left:15%">
      <div class="inference-step-label">cross-dimension</div>
      <div class="inference-step-content">
        sleep.<span class="hl">deficit</span> = <span class="alert">−1h avg over 5d</span><br>
        energy.<span class="hl">trend</span> = <span class="alert">declining</span><br>
        volume.<span class="hl">load</span> = <span class="val">stable</span><br>
        <span class="hl">correlation</span>: recovery ↔ stagnation = <span class="val">0.72</span>
      </div>
    </div>
    <div class="inference-step reveal" style="margin-left:8%">
      <div class="inference-step-label">recommendation engine</div>
      <div class="inference-step-content">
        <span class="hl">hypothesis</span>: accumulated fatigue → performance ceiling<br>
        <span class="hl">confidence</span>: <span class="val">0.78</span><br>
        <span class="hl">suggested</span>: deload_week | sleep_priority | volume_reduction
      </div>
    </div>
  </div>
</section>


<!-- CORE — Agent response in phone -->
<section class="core" id="core">
  <div class="phone--dark">
    <div class="chat--dark">
      <div class="msg--user-echo">
        Did squats today, 5×5 at 100kg. Felt heavy…
      </div>
      <div class="msg--agent-response" id="agent-msg">
        Logged. Your squat has been at 116&thinsp;kg estimated max for three weeks now — volume is there, but the weight isn't moving.<br><br>
        You've also been sleeping about an hour less than usual. That's probably not a coincidence.<br><br>
        <strong>Want me to program a deload week?</strong>
      </div>
    </div>
  </div>
</section>

<!-- BOTTOM -->
<section class="bottom">
  <div class="bottom-mark">KURA</div>
</section>


<script>
// === Generic reveal observer ===
const revealObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.classList.add('visible');
      if (e.target.classList.contains('stagger'))
        e.target.querySelectorAll('.reveal').forEach(r => r.classList.add('visible'));
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });

document.querySelectorAll('.reveal:not(.stagger .reveal)').forEach(el => revealObs.observe(el));
document.querySelectorAll('.stagger').forEach(el => revealObs.observe(el));

// === Phone scene — message appears, then typing dots ===
const phoneObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      const msg = document.getElementById('msg-user');
      setTimeout(() => msg.classList.add('visible'), 300);
      setTimeout(() => document.getElementById('typing').classList.add('visible'), 1200);
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.4 });
phoneObs.observe(document.getElementById('phone-scene'));

// === Strata lines ===
const strataObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.querySelectorAll('.strata-line').forEach(l => l.classList.add('visible'));
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.2 });
strataObs.observe(document.getElementById('strata-lines'));

// === Event lines ===
const elObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.querySelectorAll('.event-line').forEach(l => l.classList.add('visible'));
      document.getElementById('threads-svg').classList.add('visible');
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.1 });
elObs.observe(document.getElementById('event-lines'));

// === Event JSON lines ===
let jsonDone = false;
const jsonObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting && !jsonDone) {
      jsonDone = true;
      const lines = document.querySelectorAll('#event-json .line');
      const cursor = document.getElementById('json-cursor');
      const label = document.querySelector('#event-write .reveal');
      if (label) label.classList.add('visible');
      let i = 0;
      (function next() {
        if (i < lines.length) { lines[i].classList.add('typed'); i++; setTimeout(next, 100); }
        else { cursor.style.animation = 'blink 0.6s step-end 3'; setTimeout(() => cursor.style.opacity = '0', 2000); }
      })();
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.25 });
jsonObs.observe(document.getElementById('event-write'));

// === Projections cascade ===
['proj-1','proj-2','proj-3'].forEach((id, i) => {
  const el = document.getElementById(id);
  const obs = new IntersectionObserver((entries, o) => {
    entries.forEach(e => {
      if (e.isIntersecting) { setTimeout(() => e.target.classList.add('visible'), i * 300); o.unobserve(e.target); }
    });
  }, { threshold: 0.2 });
  obs.observe(el);
});

// === Deep mesh + clouds ===
const deepObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      document.getElementById('mesh').classList.add('visible');
      ['cloud-1','cloud-2','cloud-3'].forEach(id => document.getElementById(id).classList.add('visible'));
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.1 });
deepObs.observe(document.getElementById('deep'));

// === Agent response ===
const agentObs = new IntersectionObserver((entries, obs) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      setTimeout(() => document.getElementById('agent-msg').classList.add('visible'), 400);
      obs.unobserve(e.target);
    }
  });
}, { threshold: 0.3 });
agentObs.observe(document.getElementById('core'));
</script>

</body>
</html>
