# Kura Production Environment
# Copy to .env.production and fill in values:
#   cp .env.production.example .env.production

# Database password (use a strong random value!)
# Generate with: openssl rand -hex 24
# IMPORTANT: Use hex (not base64) to avoid +/= chars that break DATABASE_URL
KURA_DB_PASSWORD=CHANGE_ME

# API key for the proxy (generated by scripts/setup-user.sh)
# The proxy injects this as Authorization header â€” Fred never sees the key.
KURA_API_KEY=CHANGE_ME

# Shared secret for model attestation signature verification.
# MUST be identical in gateway signer and Kura API verifier.
# Generate with: openssl rand -hex 32
KURA_AGENT_MODEL_ATTESTATION_SECRET=CHANGE_ME

# Supabase/Postgres runtime URLs (required)
# API query path
KURA_API_DATABASE_URL=postgresql://<user>:<password>@<host>:5432/postgres?sslmode=require
# Worker query path
KURA_WORKER_DATABASE_URL=postgresql://<user>:<password>@<host>:5432/postgres?sslmode=require
# Optional dedicated LISTEN/NOTIFY URL for worker
KURA_WORKER_LISTEN_DATABASE_URL=

# Public web/API routing (required)
KURA_WEB_PUBLIC_API_URL=https://api.withkura.com
KURA_FRONTEND_URL=https://withkura.com
KURA_CORS_ORIGINS=https://withkura.com,https://www.withkura.com

# Optional localhost bind ports for cloudflared ingress
KURA_WEB_PORT=3001
KURA_API_PUBLIC_PORT=8330

# ---------------------------------------------------------------------------
# Optional: Daily pg_dump backup to S3-compatible object storage
# Used by scripts/pgdump_s3_backup.sh
# ---------------------------------------------------------------------------

# Override DB URL for backups. If empty, script falls back to KURA_API_DATABASE_URL.
KURA_BACKUP_DATABASE_URL=

# S3-compatible destination (AWS S3, Cloudflare R2, Backblaze B2 S3 API, etc.)
BACKUP_S3_BUCKET=CHANGE_ME
BACKUP_S3_PREFIX=kura-training/postgres

# Optional custom endpoint for non-AWS S3 providers.
# Examples:
#   Cloudflare R2: https://<account-id>.r2.cloudflarestorage.com
#   Backblaze B2:  https://s3.<region>.backblazeb2.com
BACKUP_S3_ENDPOINT_URL=

# AWS-compatible credentials for the backup target.
AWS_REGION=eu-west-1
AWS_ACCESS_KEY_ID=CHANGE_ME
AWS_SECRET_ACCESS_KEY=CHANGE_ME
